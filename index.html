<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ù…Ø¯Ø±Ø¨ÙŠÙ† Ø§Ù„ÙˆØ±Ø´ğŸ—£ï¸</title>
  <style>
    :root{
      --card-bg: rgba(18,18,22,0.78);
      --card-border: rgba(255,255,255,0.06);
      --input-bg: rgba(10,12,14,0.6);
      --input-border: rgba(255,255,255,0.08);
      --overlay: rgba(0,0,0,0.22);
      --accent: #ffd23f;
      --accent-dark: #f3bd1f;
      --yellow-box: #ffef9a;
      --btn-gradient: linear-gradient(180deg,#ffd23f,#f3bd1f);
      --muted: rgba(255,255,255,0.7);
    }
    html,body{height:100%;margin:0}
    body{
      font-family: "Segoe UI", Arial, Helvetica, sans-serif;
      background-image: url('picture.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
      color:#f6f6f6;
      filter: brightness(0.98) contrast(1.02);
    }

    .wrap::before{content:""; position:fixed; inset:0; background:var(--overlay); pointer-events:none; z-index:0}
    .wrap{position:relative; z-index:1; max-width:1100px; margin:20px auto; padding:18px}

    .title{text-align:center; font-size:24px; font-weight:800; margin-bottom:14px; color:#fff}
    .tabs{display:flex; gap:10px; justify-content:center; margin-bottom:18px; flex-wrap:wrap}
    .tab-btn{background:var(--accent); color:#111; border:0; padding:10px 18px; border-radius:8px; cursor:pointer; font-weight:700; box-shadow:0 6px 14px rgba(0,0,0,0.25)}
    .tab-btn.active{background:var(--accent-dark); transform:translateY(-1px)}

    .card{
      background:var(--card-bg);
      border:1px solid var(--card-border);
      border-radius:10px; padding:18px; margin-bottom:18px; display:none;
      backdrop-filter: blur(6px) saturate(1.05);
      box-shadow:0 10px 30px rgba(0,0,0,0.45)
    }
    .row{display:grid; grid-template-columns:1fr 2fr; gap:10px; align-items:center; margin-bottom:10px}
    label{font-weight:700; font-size:14px; color:#fff}
    input,select,textarea{
      width:100%; padding:8px; border-radius:8px; border:1px solid var(--input-border);
      background:var(--input-bg); color:#fff; font-size:14px; outline:none
    }
    textarea{min-height:160px; resize:vertical}
    .btns{display:flex; gap:10px; margin-top:12px; flex-wrap:wrap}
    .btn{background:var(--btn-gradient); color:#111; border:0; padding:10px 14px; border-radius:8px; cursor:pointer; font-weight:700; box-shadow:0 6px 14px rgba(0,0,0,0.25)}
    .sep{height:1px; background:var(--card-border); margin:14px 0}
    @media (max-width:800px){.row{grid-template-columns:1fr}}

    /* Ø²Ø± Ø§Ù„Ù†ØªØ§Ø¦Ø¬ - Ø§Ù„Ø¢Ù† Ù„ÙˆÙ†Ù‡ Ù…Ø«Ù„ Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
    .yellow-toggle{
      display:inline-flex; align-items:center; justify-content:center;
      width:64px; height:44px; border-radius:10px; background:var(--btn-gradient); color:#111; border:2px solid rgba(0,0,0,0.08);
      cursor:pointer; font-weight:800; margin-left:8px;
      box-shadow:0 8px 18px rgba(0,0,0,0.25);
      transition: transform 140ms ease, box-shadow 140ms ease;
    }
    .yellow-toggle:active{ transform: translateY(1px) scale(0.995); box-shadow:0 6px 12px rgba(0,0,0,0.2) }

    /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */
    .results-card{
      background:var(--card-bg);
      border:1px solid var(--card-border);
      border-radius:10px; padding:18px; margin-bottom:18px; display:none;
      backdrop-filter: blur(6px) saturate(1.05);
      box-shadow:0 10px 30px rgba(0,0,0,0.45);
      transition: opacity 220ms ease, transform 220ms ease;
    }
    .results-card.show{ display:block; opacity:1; transform: translateY(0) }
    .results-card.hide{ opacity:0; transform: translateY(-6px) }

    .results-card label{color:#fff}
    .small-note{font-size:13px; color:var(--muted); margin-top:6px}

    /* Ø¯Ø±Ø¬Ø§Øª */
    .grades{display:flex; flex-direction:column; gap:8px}
    .grade-row{display:flex; gap:8px; align-items:center}
    .grade-row input{flex:1}

    /* Ø¯Ø¨ÙˆØ³ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· */
    .pin{position:fixed; top:18px; right:18px; z-index:9999; display:flex; align-items:center; gap:8px; direction:ltr}
    .pin-button{width:48px; height:48px; border-radius:12px; background:var(--btn-gradient); border:none; cursor:pointer; display:flex; align-items:center; justify-content:center; box-shadow:0 8px 20px rgba(0,0,0,0.35); color:#111; font-weight:800}
    .pin-menu{
      min-width:260px; max-width:420px; background: rgba(12,12,14,0.95); border:1px solid rgba(255,255,255,0.06);
      border-radius:10px; padding:10px; box-shadow:0 12px 30px rgba(0,0,0,0.45); display:none; flex-direction:column; gap:8px; margin-right:8px; text-align:right;
      transform: translateX(12px); transition: transform 220ms cubic-bezier(.2,.9,.2,1), opacity 220ms ease;
      opacity:0;
    }
    .pin-menu.open{ display:flex; transform: translateX(0); opacity:1 }
    /* Ø­Ø§Ù„Ø© Ø§Ù„Ø³Ø­Ø¨ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ: ÙŠØ¸Ù‡Ø± ÙˆÙƒØ£Ù†Ù‡ Ù…Ø³Ø­ÙˆØ¨ Ù„Ù„Ø®Ø§Ø±Ø¬ */
    .pin-menu.pulled{ transform: translateX(-18px) rotate(-1deg); box-shadow:0 18px 40px rgba(0,0,0,0.5) }
    .pin.pulling .pin-button{ transform: translateX(-8px) rotate(-2deg); transition: transform 120ms ease }

    .pin-tabs{display:flex; gap:6px; padding:6px}
    .pin-tab{padding:6px 10px; border-radius:8px; background:transparent; color:#fff; border:1px solid rgba(255,255,255,0.04); cursor:pointer; font-weight:700; font-size:13px}
    .pin-tab.active{background:rgba(255,255,255,0.06)}
    .pin-links{display:flex;flex-direction:column;gap:6px}
    .pin-link-row{display:flex;align-items:center;gap:8px;justify-content:space-between}
    .pin-links a{color:#fff;text-decoration:none;font-weight:700;word-break:break-word;flex:1}
    .copy-link-btn{
      background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:6px 8px;border-radius:8px;cursor:pointer;font-weight:700;font-size:12px;
      display:inline-flex;align-items:center;gap:6px;
    }
    .copy-link-btn:hover{background:rgba(255,255,255,0.03);color:#fff;border-color:rgba(255,255,255,0.12)}
    .copy-icon{width:14px;height:14px;display:inline-block;transform:translateY(1px)}
    .link-label{display:flex;gap:8px;align-items:center;flex:1}
  </style>
</head>
<body>
  <!-- Ø¯Ø¨ÙˆØ³ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· -->
  <div class="pin" aria-hidden="false">
    <button class="pin-button" id="pinToggle" title="Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¯ÙˆØ±Ø§Øª" aria-expanded="false">Ø±ÙˆØ§Ø¨Ø·</button>

    <div class="pin-menu" id="pinMenu" role="menu" aria-hidden="true">
      <div class="pin-tabs" role="tablist" aria-label="Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø¯Ø¨ÙˆØ³">
        <button class="pin-tab active" data-section="explain">Ø´Ø±Ø­ Ø§Ù„Ø¯ÙˆØ±Ø§Øª</button>
        <button class="pin-tab" data-section="tests">Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø¯ÙˆØ±Ø§Øª</button>
      </div>

      <div class="pin-section" data-section="explain">
        <div class="pin-links">
          <div class="pin-link-row">
            <div class="link-label"><a href="https://www.canva.com/design/DAGs6ZpXJZ4/8EczNf7jWa4grGNC1_JREQ/view" target="_blank" rel="noopener">Ø´Ø±Ø­ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</a></div>
            <button class="copy-link-btn" data-url="https://www.canva.com/design/DAGs6ZpXJZ4/8EczNf7jWa4grGNC1_JREQ/view" title="Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø´Ø±Ø­ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª">Ù†Ø³Ø®
              <span class="copy-icon">ğŸ“‹</span>
            </button>
          </div>

          <div class="pin-link-row">
            <div class="link-label"><a href="https://www.canva.com/design/DAGutzHb2cc/ZLwcKlEfX4nu087DKCm6Rg/view" target="_blank" rel="noopener">Ø´Ø±Ø­ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø·Ø±Ù‚</a></div>
            <button class="copy-link-btn" data-url="https://www.canva.com/design/DAGutzHb2cc/ZLwcKlEfX4nu087DKCm6Rg/view" title="Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø´Ø±Ø­ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø·Ø±Ù‚">Ù†Ø³Ø®
              <span class="copy-icon">ğŸ“‹</span>
            </button>
          </div>

          <div class="pin-link-row">
            <div class="link-label"><a href="https://www.canva.com/design/DAGsZ5eHaC0/RbIkYJ-3c14h-uQPWNa7qw/view" target="_blank" rel="noopener">Ø´Ø±Ø­ ÙˆØ±Ø´Ø© Ø§Ù„ØªØµÙ†ÙŠØ¹</a></div>
            <button class="copy-link-btn" data-url="https://www.canva.com/design/DAGsZ5eHaC0/RbIkYJ-3c14h-uQPWNa7qw/view" title="Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø´Ø±Ø­ ÙˆØ±Ø´Ø© Ø§Ù„ØªØµÙ†ÙŠØ¹">Ù†Ø³Ø®
              <span class="copy-icon">ğŸ“‹</span>
            </button>
          </div>

          <div class="pin-link-row">
            <div class="link-label"><a href="https://www.canva.com/design/DAGs6S2N9oQ/yOKZcDlmq_uPsFzL-ZvZwg/view" target="_blank" rel="noopener">Ø´Ø±Ø­ ÙˆØ±Ø´Ø© Ø§Ù„ØªØ²ÙˆÙŠØ¯</a></div>
            <button class="copy-link-btn" data-url="https://www.canva.com/design/DAGs6S2N9oQ/yOKZcDlmq_uPsFzL-ZvZwg/view" title="Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø´Ø±Ø­ ÙˆØ±Ø´Ø© Ø§Ù„ØªØ²ÙˆÙŠØ¯">Ù†Ø³Ø®
              <span class="copy-icon">ğŸ“‹</span>
            </button>
          </div>

          <div class="pin-link-row">
            <div class="link-label"><a href="https://www.canva.com/design/DAGvSVLyjNc/FF6lXkGowebTEMz84JUhWQ/view" target="_blank" rel="noopener">Ø´Ø±Ø­ Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø¥Ù†Ù‚Ø§Ø°</a></div>
            <button class="copy-link-btn" data-url="https://www.canva.com/design/DAGvSVLyjNc/FF6lXkGowebTEMz84JUhWQ/view" title="Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø´Ø±Ø­ Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø¥Ù†Ù‚Ø§Ø°">Ù†Ø³Ø®
              <span class="copy-icon">ğŸ“‹</span>
            </button>
          </div>

          <div class="pin-link-row">
            <div class="link-label"><a href="https://www.canva.com/design/DAGtKZe7JW8/hgWzX9YAkCUTxIm3-m0mMw/view" target="_blank" rel="noopener">Ø´Ø±Ø­ Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø´Ø§Ù…Ù„</a></div>
            <button class="copy-link-btn" data-url="https://www.canva.com/design/DAGtKZe7JW8/hgWzX9YAkCUTxIm3-m0mMw/view" title="Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø´Ø±Ø­ Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø´Ø§Ù…Ù„">Ù†Ø³Ø®
              <span class="copy-icon">ğŸ“‹</span>
            </button>
          </div>
        </div>
      </div>

      <div class="pin-section" data-section="tests" style="display:none">
        <div class="pin-links">
          <div class="pin-link-row">
            <div class="link-label"><a href="https://docs.google.com/forms/d/e/1FAIpQLSeusy4R53UNc5tTKKEIi8KE_zXxMRJxkJm5CSw8WcYuZU2kCw/viewform?usp=dialog" target="_blank" rel="noopener">Ø§Ø®ØªØ¨Ø§Ø± Ø¯ÙˆØ±Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</a></div>
            <button class="copy-link-btn" data-url="https://docs.google.com/forms/d/e/1FAIpQLSeusy4R53UNc5tTKKEIi8KE_zXxMRJxkJm5CSw8WcYuZU2kCw/viewform?usp=dialog" title="Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ø®ØªØ¨Ø§Ø± Ø¯ÙˆØ±Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª">Ù†Ø³Ø®
              <span class="copy-icon">ğŸ“‹</span>
            </button>
          </div>

          <div class="pin-link-row">
            <div class="link-label"><a href="https://docs.google.com/forms/d/1sOiQ93J2q5lgzm7m5bVkYb3lKjHr7nCU5cx6fQEaICY/edit" target="_blank" rel="noopener">Ø§Ø®ØªØ¨Ø§Ø± Ø¯ÙˆØ±Ø© ÙˆØ±Ø´Ø© Ø§Ù„ØªØµÙ†ÙŠØ¹</a></div>
            <button class="copy-link-btn" data-url="https://docs.google.com/forms/d/1sOiQ93J2q5lgzm7m5bVkYb3lKjHr7nCU5cx6fQEaICY/edit" title="Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ±Ø´Ø© Ø§Ù„ØªØµÙ†ÙŠØ¹">Ù†Ø³Ø®
              <span class="copy-icon">ğŸ“‹</span>
            </button>
          </div>

          <div class="pin-link-row">
            <div class="link-label"><a href="https://docs.google.com/forms/d/e/1FAIpQLSdXFnId2b-MxfdLr8oebJnQTbdjI-SN4L6Y1gXBNjJiPbGn1A/viewform?usp=dialog" target="_blank" rel="noopener">Ø§Ø®ØªØ¨Ø§Ø± Ø¯ÙˆØ±Ø© Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø·Ø±Ù‚</a></div>
            <button class="copy-link-btn" data-url="https://docs.google.com/forms/d/e/1FAIpQLSdXFnId2b-MxfdLr8oebJnQTbdjI-SN4L6Y1gXBNjJiPbGn1A/viewform?usp=dialog" title="Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ø®ØªØ¨Ø§Ø± Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø·Ø±Ù‚">Ù†Ø³Ø®
              <span class="copy-icon">ğŸ“‹</span>
            </button>
          </div>

          <div class="pin-link-row">
            <div class="link-label"><a href="https://docs.google.com/forms/d/e/1FAIpQLSdXpfhNYO5qdkb3d0v_NkwOeKRUTjNxYWW9ptllPWswXmnqFg/viewform?usp=dialog" target="_blank" rel="noopener">Ø§Ø®ØªØ¨Ø§Ø± Ø¯ÙˆØ±Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙˆØ§Ù„ØªØ²ÙˆÙŠØ¯</a></div>
            <button class="copy-link-btn" data-url="https://docs.google.com/forms/d/e/1FAIpQLSdXpfhNYO5qdkb3d0v_NkwOeKRUTjNxYWW9ptllPWswXmnqFg/viewform?usp=dialog" title="Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙˆØ§Ù„ØªØ²ÙˆÙŠØ¯">Ù†Ø³Ø®
              <span class="copy-icon">ğŸ“‹</span>
            </button>
          </div>

          <div class="pin-link-row">
            <div class="link-label"><a href="https://docs.google.com/forms/d/e/1FAIpQLSd66idu5DuEGXjd1xFS0JFnuEto9LUi6V24q47hwctUC0Lrug/viewform" target="_blank" rel="noopener">Ø§Ø®ØªØ¨Ø§Ø± Ø¯ÙˆØ±Ø© Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø¥Ù†Ù‚Ø§Ø°</a></div>
            <button class="copy-link-btn" data-url="https://docs.google.com/forms/d/e/1FAIpQLSd66idu5DuEGXjd1xFS0JFnuEto9LUi6V24q47hwctUC0Lrug/viewform" title="Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø¥Ù†Ù‚Ø§Ø°">Ù†Ø³Ø®
              <span class="copy-icon">ğŸ“‹</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="wrap">
    <div class="title">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø¯ÙˆØ±Ø© Ù„Ù„Ø¨Ø¯Ø¡ </div>

    <div class="tabs">
      <button class="tab-btn" id="showBasic">Ø¯ÙˆØ±Ø© Ø£Ø³Ø§Ø³ÙŠØ©</button>
      <button class="tab-btn" id="showSpecial">Ø¯ÙˆØ±Ø© Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠØ©</button>
    </div>

    <!-- Ø¨Ø·Ø§Ù‚Ø© Ø£Ø³Ø§Ø³ÙŠØ© Ù…Ø¹ Ø²Ø± "Ø§Ù„Ù†ØªØ§Ø¦Ø¬" -->
    <section class="card" id="basicCard">
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
        <h3 style="margin:0">Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø£Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø§Ù„Ø¯ÙˆØ±Ø© ÙˆØ§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ·Ù„Ø¨ ØªØ³Ù„ÙŠÙ… Ø±ÙˆÙ„ (Ø£Ø³Ø§Ø³ÙŠØ©)</h3>
        <div style="display:flex;align-items:center">
          <button class="yellow-toggle" id="openResultsFromBasic" title="ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù†ØªØ§Ø¦Ø¬">Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
        </div>
      </div>

      <div class="row"><label>Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ Ù…Ù† Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø±Ø³ÙˆÙ…</label><input id="sequenceBasic" type="number" placeholder="Ù…Ø«Ø§Ù„: 5"></div>
      <div class="row"><label>Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©</label>
        <select id="courseNameBasic">
          <option>Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø´Ø§Ù…Ù„</option>
          <option>Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</option>
          <option>ÙˆØ±Ø´Ø© Ø§Ù„ØªØµÙ†ÙŠØ¹</option>
          <option>Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø·Ø±Ù‚</option>
          <option>ÙˆØ±Ø´Ø© Ø§Ù„ØªØ²ÙˆÙŠØ¯</option>
          <option>Ø¯ÙˆØ±Ø© Ù…Ø¯Ø±Ø¨ÙŠÙ† Ø§Ù„ÙˆØ±Ø´</option>
          <option>Ø¯ÙˆØ±Ø© Ø§Ù„Ø´ÙˆØ¤Ù† Ø§Ù„Ø£Ø¯Ø§Ø±ÙŠØ©</option>
          <option>Ø´ÙˆØ¤Ù† ØªÙˆØ¸ÙŠÙ Ø§Ù„ÙƒØ±Ø§Ø¬</option>
          <option>Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø¥Ù†Ù‚Ø§Ø°</option>
        </select>
      </div>
      <div class="row"><label>Ø±Ù‚Ù… Ø§Ù„Ø¯ÙˆØ±Ø©</label><input id="courseNumberBasic" type="text" placeholder="Ù…Ø«Ø§Ù„: 12"></div>
      <div class="row"><label>ØªÙ… Ø´Ø±Ø­ Ø§Ù„Ø¯ÙˆØ±Ø© Ù…Ù† Ù‚Ø¨Ù„</label><input id="explainerBasic" type="text" placeholder="Ø¶Ø¹ Ø§Ù„ÙƒÙˆØ¨ÙŠ Ø§ÙŠØ¯ÙŠ Ù„Ø´Ø§Ø±Ø­ Ø§Ù„Ø¯ÙˆØ±Ø©"></div>
      <div class="row"><label>ØªÙ… ØªØµØ­ÙŠØ­ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù…Ù† Ù‚Ø¨Ù„</label><input id="correctorBasic" type="text" placeholder="Ø¶Ø¹ Ø§Ù„ÙƒÙˆØ¨ÙŠ Ø§ÙŠØ¯ÙŠ Ù„Ù…ØµØ­Ø­ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±"></div>
      <div class="row"><label>Ø§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ† Ø§Ù„Ù…ØªÙØ§Ø¹Ù„ÙŠÙ†</label><input id="trainersBasic" type="text" placeholder=" Ø¶Ø¹ Ø§Ù„ÙƒÙˆØ¨ÙŠ Ø§ÙŠØ¯ÙŠ Ù„Ù„Ù…Ø¯Ø±Ø¨ ÙÙŠ Ø­Ø§Ù„ ÙˆØ¬ÙˆØ¯ Ø§ÙƒØ«Ø± Ù…Ù† Ù…Ø¯Ø±Ø¨ Ø§ÙØµÙ„ Ø¨Ù…Ø³Ø§ÙØ©  "></div>
      <div class="row"><label>Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ†</label><input id="othersBasic" type="text" placeholder=" Ø¶Ø¹ Ø§Ù„ÙƒÙˆØ¨ÙŠ Ø§ÙŠØ¯ÙŠ Ù„Ù„Ù…Ø¯Ø±Ø¨ ÙÙŠ Ø­Ø§ÙˆÙ„ ÙˆØ¬ÙˆØ¯ Ø§ÙƒØ«Ø± Ù…Ù† Ù…Ø¯Ø±Ø¨ Ø§ÙØµÙ„ Ø¨Ù…Ø³Ø§ÙØ© Ø£Ùˆ Ù„Ø§ÙŠÙˆØ¬Ø¯"></div>
      <div class="row"><label>Ø±Ø§Ø¨Ø· Ø§Ù„Ù†ØªØ§Ø¦Ø¬</label><input id="resultsBasic" type="url" placeholder="Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ù† Ø±ÙˆÙ… Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ùˆ Ù„Ø§ÙŠÙˆØ¬Ø¯ Ø§Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø´Ø§Ù…Ù„"></div>

      <div class="btns">
        <button class="btn" id="createBasic">Ø¥Ù†Ø´Ø§Ø¡</button>
        <button class="btn" id="copyBasic">Ù†Ø³Ø®</button>
      </div>

      <div class="sep"></div>
      <textarea id="outputBasic" readonly></textarea>
    </section>

    <!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠØ© -->
    <section class="card" id="specialCard">
      <h3 style="margin:0 0 8px 0">Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø£Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠØ©</h3>

      <div class="row"><label>Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ Ù…Ù† Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø±Ø³ÙˆÙ…</label><input id="sequenceSpecial" type="number" placeholder="Ù…Ø«Ø§Ù„: 7"></div>
      <div class="row"><label>Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©</label>
        <select id="courseNameSpecial">
          <option>Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø´Ø§Ù…Ù„</option>
          <option>Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</option>
          <option>ÙˆØ±Ø´Ø© Ø§Ù„ØªØµÙ†ÙŠØ¹</option>
          <option>Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø·Ø±Ù‚</option>
          <option>ÙˆØ±Ø´Ø© Ø§Ù„ØªØ²ÙˆÙŠØ¯</option>
          <option>Ø¯ÙˆØ±Ø© Ù…Ø¯Ø±Ø¨ÙŠÙ† Ø§Ù„ÙˆØ±Ø´</option>
          <option>Ø¯ÙˆØ±Ø© Ø§Ù„Ø´ÙˆØ¤Ù† Ø§Ù„Ø£Ø¯Ø§Ø±ÙŠØ©</option>
          <option>Ø´ÙˆØ¤Ù† ØªÙˆØ¸ÙŠÙ Ø§Ù„ÙƒØ±Ø§Ø¬</option>
          <option>Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø¥Ù†Ù‚Ø§Ø°</option>
        </select>
      </div>
      <div class="row"><label>ØªÙ… Ø¥Ù‚Ø§Ù…Ø© Ø§Ù„Ø¯ÙˆØ±Ø© Ù„Ù„ÙÙ†ÙŠ</label><input id="technicianSpecial" type="text" placeholder="Ø¶Ø¹ Ø§Ù„ÙƒÙˆØ¨ÙŠ Ø§ÙŠØ¯ÙŠ Ù„Ù„ÙÙ†ÙŠ "></div>
      <div class="row"><label>ØªÙ… Ø´Ø±Ø­ Ø§Ù„Ø¯ÙˆØ±Ø© Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø¯Ø±Ø¨</label><input id="explainerSpecial" type="text" placeholder="Ø¶Ø¹ Ø§Ù„ÙƒÙˆØ¨ÙŠ Ø§ÙŠØ¯ÙŠ Ù„Ù„Ù…Ø¯Ø±Ø¨ Ø´Ø§Ø±Ø­ Ø§Ù„Ø¯ÙˆØ±Ø©"></div>

      <div class="row">
        <label>Ø¯Ø±Ø¬Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
        <div>
          <select id="examSpecial">
            <option value="">Ø§Ø®ØªØ± Ø¯Ø±Ø¬Ø©</option>
            <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
            <option>6</option><option>7</option><option>8</option><option>9</option><option>10</option>
          </select>
          <input id="examSpecialText" type="text" placeholder="Ø£Ùˆ Ø§ÙƒØªØ¨: Ù„Ø§ÙŠÙˆØ¬Ø¯ ÙÙŠ Ø­Ø§Ù„ Ù„ÙŠØ³ Ù„Ù„Ø¯ÙˆØ±Ø© Ø§Ø®ØªØ¨Ø§Ø±" style="margin-top:8px;">
        </div>
      </div>

      <div class="btns">
        <button class="btn" id="createSpecial">Ø¥Ù†Ø´Ø§Ø¡</button>
        <button class="btn" id="copySpecial">Ù†Ø³Ø®</button>
      </div>

      <div class="sep"></div>
      <textarea id="outputSpecial" readonly></textarea>
    </section>

    <!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
    <section class="results-card card" id="resultsCard">
      <h3 style="margin-top:0">Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h3>

      <div class="row"><label>Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
        <select id="courseNameResults">
          <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆØ±Ø© --</option>
          <option>Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø´Ø§Ù…Ù„</option>
          <option>Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</option>
          <option>ÙˆØ±Ø´Ø© Ø§Ù„ØªØµÙ†ÙŠØ¹</option>
          <option>Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø·Ø±Ù‚</option>
          <option>ÙˆØ±Ø´Ø© Ø§Ù„ØªØ²ÙˆÙŠØ¯</option>
          <option>Ø¯ÙˆØ±Ø© Ù…Ø¯Ø±Ø¨ÙŠÙ† Ø§Ù„ÙˆØ±Ø´</option>
          <option>Ø¯ÙˆØ±Ø© Ø§Ù„Ø´ÙˆØ¤Ù† Ø§Ù„Ø£Ø¯Ø§Ø±ÙŠØ©</option>
          <option>Ø´ÙˆØ¤Ù† ØªÙˆØ¸ÙŠÙ Ø§Ù„ÙƒØ±Ø§Ø¬</option>
          <option>Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø¥Ù†Ù‚Ø§Ø°</option>
        </select>
      </div>

      <div class="row"><label>Ø±Ù‚Ù… Ø§Ù„Ø¯ÙˆØ±Ø©</label><input id="courseNumberResults" type="text" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¯ÙˆØ±Ø©"></div>

      <div style="margin-top:8px; font-weight:800; color:#fff">Ø§Ù„Ø£Ø´Ø®Ø§Øµ Ø§Ù„Ø­Ø§ØµÙ„ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ø±Ø¬Ø§Øª (Ø£Ø¯Ø®Ù„ Ø£Ø±Ù‚Ø§Ù… Ù…ÙØµÙˆÙ„Ø© Ø¨Ù…Ø³Ø§ÙØ©)</div>
      <div class="grades" style="margin-top:8px">
        <div class="grade-row">
          <div style="min-width:100px; font-weight:800; color:#fff">***10 / 10***</div>
          <input id="grade10" type="text" placeholder="Ù…Ø«Ø§Ù„: 1069596605080162397  Ø£Ùˆ Ø§ÙƒØªØ¨: Ù„Ø§ÙŠÙˆØ¬Ø¯">
        </div>
        <div class="grade-row">
          <div style="min-width:100px; font-weight:800; color:#fff">***10 / 09***</div>
          <input id="grade9" type="text" placeholder="Ù…Ø«Ø§Ù„: 1069596605080162397 Ø£Ùˆ Ø§ÙƒØªØ¨: Ù„Ø§ÙŠÙˆØ¬Ø¯">
        </div>
        <div class="grade-row">
          <div style="min-width:100px; font-weight:800; color:#fff">***10 / 08***</div>
          <input id="grade8" type="text" placeholder="Ù…Ø«Ø§Ù„: 1069596605080162397  Ø£Ùˆ Ø§ÙƒØªØ¨: Ù„Ø§ÙŠÙˆØ¬Ø¯">
        </div>
        <div class="grade-row">
          <div style="min-width:100px; font-weight:800; color:#fff">***10 / 07***</div>
          <input id="grade7" type="text" placeholder="Ù…Ø«Ø§Ù„:  1069596605080162397 Ø£Ùˆ Ø§ÙƒØªØ¨: Ù„Ø§ÙŠÙˆØ¬Ø¯">
        </div>
      </div>

      <div class="sep"></div>

      <div class="row"><label>Ø´Ø§Ø±Ø­ Ø§Ù„Ø¯ÙˆØ±Ø©</label><input id="resultsExplainer" type="text" placeholder="  Ø¶Ø¹ Ø§Ù„ÙƒÙˆØ¨ÙŠ Ø§ÙŠØ¯ÙŠ Ù„Ù„Ù…Ø¯Ø±Ø¨ Ø´Ø§Ø±Ø­ Ø§Ù„Ø¯ÙˆØ±Ø© "></div>
      <div class="row"><label>Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø¯ÙˆØ±Ø©</label><input id="resultsResponsible" type="text" placeholder="  Ø¶Ø¹ Ø§Ù„ÙƒÙˆØ¨ÙŠ Ø§ÙŠØ¯ÙŠ Ù„Ù…Ø³ÙˆØ¤Ù„ Ø§Ù„Ø¯ÙˆØ±Ø©  "></div>
      <div class="row"><label>Ù†Ø§Ø¦Ø¨ Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø¯ÙˆØ±Ø©</label><input id="resultsDeputy" type="text" placeholder="  Ø¶Ø¹ Ø§Ù„ÙƒÙˆØ¨ÙŠ Ø§ÙŠØ¯ÙŠ Ù„Ù†Ø§Ø¦Ø¨ Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø¯ÙˆØ±Ø©  "></div>

      <div class="small-note">Ø§ÙƒØªØ¨ "Ù„Ø§ÙŠÙˆØ¬Ø¯" Ù„Ø­Ø°Ù Ø®Ø§Ù†Ø© Ø§Ù„Ø¯Ø±Ø¬Ø© Ù…Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹. Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ØªØªØ­ÙˆÙ„ Ù„Ø£Ø³Ø·Ø± Ø¨ØµÙŠØºØ© &lt;@ID&gt;.</div>

      <div class="btns" style="margin-top:12px">
        <button class="btn" id="createResults">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
        <button class="btn" id="copyResults">Ù†Ø³Ø®</button>
      </div>

      <div class="sep"></div>
      <textarea id="outputResults" readonly></textarea>
    </section>

  </div>

  <script>
    // Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ Ù„ÙƒÙ„ Ø¯ÙˆØ±Ø©
    const sigMap = {
      "Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø´Ø§Ù…Ù„":"<@1271182726179061915>",
      "Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª":"<@1240550089093677087>",
      "ÙˆØ±Ø´Ø© Ø§Ù„ØªØµÙ†ÙŠØ¹":"<@508028428830638085>",
      "Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø·Ø±Ù‚":"<@1059976190988910772>",
      "ÙˆØ±Ø´Ø© Ø§Ù„ØªØ²ÙˆÙŠØ¯":"<@571068478753341453>",
      "Ø¯ÙˆØ±Ø© Ù…Ø¯Ø±Ø¨ÙŠÙ† Ø§Ù„ÙˆØ±Ø´":"<@1243196849372790916>",
      "Ø¯ÙˆØ±Ø© Ø§Ù„Ø´ÙˆØ¤Ù† Ø§Ù„Ø£Ø¯Ø§Ø±ÙŠØ©":"<@1140931533285367852>",
      "Ø´ÙˆØ¤Ù† ØªÙˆØ¸ÙŠÙ Ø§Ù„ÙƒØ±Ø§Ø¬":"<@1271182726179061915>",
      "Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø¥Ù†Ù‚Ø§Ø°":"<@1243196849372790916>"
    };

    // ØªØ­ÙˆÙŠÙ„ Ø£Ø±Ù‚Ø§Ù… Ø¨Ù…Ø³Ø§ÙØ§Øª Ø¥Ù„Ù‰ Ø£Ø³Ø·Ø± <@ID>
    function formatMentionsVertical(input){
      if(!input) return '';
      const raw = input.trim();
      if(!raw) return '';
      if(raw.toLowerCase().replace(/\s+/g,'') === 'Ù„Ø§ÙŠÙˆØ¬Ø¯') return 'NO_FIELD';
      const parts = raw.split(/\s+/).filter(Boolean);
      return parts.map(p => `<@${String(p).replace(/<@|>|@/g,'')}>`).join('\n');
    }
    // ØªØºÙ„ÙŠÙ Ù…ÙØ±Ø¯ ÙƒÙ€ <@ID>
    function wrapSingleAsAngle(val){
      if(!val) return '';
      const cleaned = String(val).trim().replace(/<@|>|@/g,'');
      if(!cleaned) return '';
      return `<@${cleaned}>`;
    }
    // Ù†Ø³Ø® Ù†Øµ
    function copyText(id){
      const txt = document.getElementById(id).value;
      if(!txt){ alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†Øµ Ù„Ù†Ø³Ø®Ù‡"); return; }
      navigator.clipboard.writeText(txt).then(()=> alert("ØªÙ… Ø§Ù„Ù†Ø³Ø®"));
    }

    // Ø¥Ù†Ø´Ø§Ø¡ Ù†Øµ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
    function generateResults(prefillCourse='', prefillCourseNumber=''){
      const course = document.getElementById('courseNameResults').value || prefillCourse || '';
      const courseNum = document.getElementById('courseNumberResults').value || prefillCourseNumber || '';

      const g10 = formatMentionsVertical(document.getElementById('grade10').value || '');
      const g9  = formatMentionsVertical(document.getElementById('grade9').value || '');
      const g8  = formatMentionsVertical(document.getElementById('grade8').value || '');
      const g7  = formatMentionsVertical(document.getElementById('grade7').value || '');

      const explMention = wrapSingleAsAngle(document.getElementById('resultsExplainer').value || '');
      const respRaw = document.getElementById('resultsResponsible').value || '';
      const depRaw  = document.getElementById('resultsDeputy').value || '';
      const respMentions = (respRaw && respRaw.trim().toLowerCase() !== 'Ù„Ø§ÙŠÙˆØ¬Ø¯') ? respRaw.split(/\s+/).map(s=>`<@${s.replace(/<@|>|@/g,'')}>`).join(' ') : '';
      const depMentions  = (depRaw && depRaw.trim().toLowerCase() !== 'Ù„Ø§ÙŠÙˆØ¬Ø¯') ? depRaw.split(/\s+/).map(s=>`<@${s.replace(/<@|>|@/g,'')}>`).join(' ') : '';

      function block(label, formatted){
        if(!formatted || formatted==='NO_FIELD') return '';
        return `${label}\n${formatted}\n\n`;
      }

      const signature = '<@1243196849372790916>';
      const copyTo = '<@&1071933354976493650>';
      const follow = '<@&1149742928953086105>';
      const info = '<@&1071933352497664010>';

      // Ø¹Ù†ÙˆØ§Ù† Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø© ÙˆØ±Ù‚Ù…Ù‡Ø§ Ø¯Ø§Ø®Ù„ **`...`**
      const header = `**\`  Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø© ( ${course} ) (${courseNum}) \`**\n\n`;

      // Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù†Øµ: Ø¨Ø³Ù…Ù„Ø© Ø«Ù… Ø³Ø·Ø±ÙŠÙ† ÙØ±Ø§Øº Ø«Ù… "Ø§Ù…Ø§ Ø¨Ø¹Ø¯ .."
      let text = `***ï·½***\n\n\n***Ø§Ù…Ø§ Ø¨Ø¹Ø¯ ..***\n`;
      // Ø§Ù„Ø¹Ù†ÙˆØ§Ù† + Ø§Ù„Ø¯Ø±Ø¬Ø§Øª
      text += header;
      text += block('***10 / 10 ***', g10);

      text += block('***10 / 09 ***', g9);

      text += block('***10 / 08 ***', g8);

      text += block('***10 / 07 ***', g7);


      // Ø§Ù„Ø®Ø· Ø§Ù„ÙØ§ØµÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ø¨Ø¹Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆÙ‚Ø¨Ù„ Ø¨Ù‚ÙŠØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
      text += '---------------------------------------------------------------------------------------\n\n';

      // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø±Ø­ ÙˆØ§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ† (Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©)
      text += `***Ø´Ø±Ø­ :*** ${explMention ? explMention : '( - )'}\n`;

      text += `***Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø¯ÙˆØ±Ø© :*** ${respMentions ? respMentions : '( - )'}\n`;

      text += `***Ù†Ø§Ø¦Ø¨ Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø¯ÙˆØ±Ø© :*** ${depMentions ? depMentions : '( - )'}\n\n`;

      // Ù‚Ù†ÙˆØ§Øª Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ ÙˆØ§Ù„Ù†Ø³Ø® ÙˆØ§Ù„Ù…ØªØ§Ø¨Ø¹Ø©
      text += `***Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ ÙˆØ§Ø¹ØªÙ…Ø§Ø¯ :*** ${signature}\n`;

      text += `***Ù†Ø³Ø®Ø© Ø§Ù„Ù‰/*** ${copyTo}\n`;

      text += `***Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø© ÙˆØ§Ù„ØªÙ†ÙÙŠØ° :*** ${follow}\n`;

      text += `***Ù„Ù„Ø¹Ù„Ù… Ùˆ Ø§Ù„Ø§Ø­Ø§Ø·Ø© :*** ${info}\n`;

      document.getElementById('outputResults').value = text;
    }

    // Toggle Ù„ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ø¹ ØªØ£Ø«ÙŠØ± Ø¨Ø³ÙŠØ·
    function openResultsToggle(prefillCourse='', prefillCourseNumber=''){
      const card = document.getElementById('resultsCard');
      const isVisible = card.classList.contains('show');
      if(isVisible){
        card.classList.remove('show');
        card.classList.add('hide');
        setTimeout(()=>{ card.classList.remove('hide'); card.style.display = 'none'; }, 220);
      } else {
        card.style.display = 'block';
        requestAnimationFrame(()=> card.classList.add('show'));
        if(prefillCourse){ document.getElementById('courseNameResults').value = prefillCourse; }
        if(prefillCourseNumber){ document.getElementById('courseNumberResults').value = prefillCourseNumber; }
        card.scrollIntoView({behavior:'smooth', block:'center'});
      }
    }

    // Ù…Ø³Ø§Ø¹Ø¯Ø§Øª Ù„Ù„Ù†Ù…ÙˆØ°Ø¬ÙŠÙ† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†
    function toAngleSingle(val){
      if(!val) return '';
      const cleaned = String(val).trim().replace(/<@|>|@/g,'');
      return `<@${cleaned}>`;
    }
    function toAngleList(val){
      if(!val) return '';
      if(val.trim().toLowerCase()==='Ù„Ø§ÙŠÙˆØ¬Ø¯') return 'Ù„Ø§ÙŠÙˆØ¬Ø¯';
      return val.split(/\s+/).filter(Boolean).map(s=>`<@${s.replace(/<@|>|@/g,'')}>`).join(' ');
    }

    function generateBasic(){
      const seq = document.getElementById('sequenceBasic').value || '';
      const course = document.getElementById('courseNameBasic').value || '';
      const num = document.getElementById('courseNumberBasic').value || '';
      const expl = toAngleSingle(document.getElementById('explainerBasic').value || '');
      const corr = toAngleSingle(document.getElementById('correctorBasic').value || '');
      const trainers = toAngleList(document.getElementById('trainersBasic').value || '');
      const others = toAngleList(document.getElementById('othersBasic').value || '');
      const url = document.getElementById('resultsBasic').value || '';
      const sig = sigMap[course] || '<@571068478753341453>';

      const text = `*** Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø£Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø§Ù„Ø¯ÙˆØ±Ø© ÙˆØ§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ·Ù„Ø¨ ØªØ³Ù„ÙŠÙ… Ø±ÙˆÙ„ ***

\`- ØªÙ… ØªØ¹Ø¨ÙŠØ© Ø¬Ø¯Ø§ÙˆÙ„ Ø±Ø³ÙˆÙ… Ø§Ù„Ø¯ÙˆØ±Ø§Øª ÙÙŠ Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø®Ø§Øµ ÙÙŠ Ø¯ÙˆØ±Ø© (${course}) Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ (${seq}) Ù‚Ø¨Ù„ Ø§Ø±Ø³Ø§Ù„ Ù‡Ø§Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± :\`

*** \` Ù†ÙˆØ¹ Ø§Ù„Ø¯ÙˆØ±Ø© : \`( Ø£Ø³Ø§Ø³ÙŠØ© )***

*** \` Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø© : \` ( ${course} )***

*** \` Ø±Ù‚Ù… Ø§Ù„Ø¯ÙˆØ±Ø© : \` ( ${num} )***

*** \`ØªÙ… Ø´Ø±Ø­ Ø§Ù„Ø¯ÙˆØ±Ø© Ù…Ù† Ù‚Ø¨Ù„  :\`   ( ${expl} )***

*** \`ØªÙ… ØªØµØ­ÙŠØ­ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù…Ù† Ù‚Ø¨Ù„  :\`  ( ${corr} )***

*** \`Ø§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ† Ø§Ù„Ù…ØªÙØ§Ø¹Ù„ÙŠÙ† : \`***   ( ${trainers} )

*** \` Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ† :\`  ( ${others} )

*** \`Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨ : \`***   Ø§Ø¹Ø·Ø§Ø¡ Ø±ÙˆÙ„ ( ${course} )(${url}) 

*** \` ØªÙˆÙ‚ÙŠØ¹ ÙˆØ§Ø¹ØªÙ…Ø§Ø¯ :\` ${sig} ***

*** \` Ù„Ù„Ø¹Ù„Ù… :\` <@1182445629721563177> ***

\`\`\`diff
- Ù…Ù„Ø§Ø­Ø¸Ù‡ ÙŠØªÙ… Ø§Ø±ÙØ§Ù‚ ØµÙˆØ±Ù‡ Ø§Ù„Ø¥Ø¯Ø§Ø¹ Ø§Ù„Ù…Ø¨Ù„Øº ÙÙŠ Ø§Ù„Ø®Ø²Ù†Ù‡
\`\`\``;

      document.getElementById('outputBasic').value = text;
    }

    function generateSpecial(){
      const seq = document.getElementById('sequenceSpecial').value || '';
      const course = document.getElementById('courseNameSpecial').value || '';
      const tech = document.getElementById('technicianSpecial').value || '';
      const expl = document.getElementById('explainerSpecial').value || '';
      const gradeSelect = document.getElementById('examSpecial').value || '';
      const gradeTextInput = document.getElementById('examSpecialText').value || '';
      let gradeRaw = '';
      if(gradeTextInput.trim()) gradeRaw = gradeTextInput.trim();
      else if(gradeSelect) gradeRaw = gradeSelect.trim();

      const gradeNormalized = gradeRaw.toLowerCase().replace(/\s+/g,'');
      const shouldOmitGrade = (gradeNormalized === 'Ù„Ø§ÙŠÙˆØ¬Ø¯' || gradeNormalized === 'Ù„Ø§ÙŠÙˆØ¬Ø¯.' || gradeRaw === '');

      const techMention = tech ? `<@${String(tech).trim().replace(/<@|>|@/g,'')}>` : '';
      const explMention = expl ? `<@${String(expl).trim().replace(/<@|>|@/g,'')}>` : '';
      const sig = sigMap[course] || "<@571068478753341453>";
      const gradeLine = shouldOmitGrade ? '' : `*** \`Ø¯Ø±Ø¬Ù‡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±  :\` ( ${gradeRaw}|10 )\n`;

      const text = `*** Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø£Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠØ© ***

\`- ØªÙ… ØªØ¹Ø¨ÙŠØ© Ø¬Ø¯Ø§ÙˆÙ„ Ø±Ø³ÙˆÙ… Ø§Ù„Ø¯ÙˆØ±Ø§Øª ÙÙŠ Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠØ© ÙÙŠ Ø¯ÙˆØ±Ø© (${course}) Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ (${seq}) Ù‚Ø¨Ù„ Ø§Ø±Ø³Ø§Ù„ Ù‡Ø§Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± :\`

*** \` Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø© : \` ( ${course} )***

*** \` ØªÙ… Ø¥Ù‚Ø§Ù…Ù‡ Ø§Ù„Ø¯ÙˆØ±Ø© Ù„Ù„ÙÙ†ÙŠ : \` ${techMention}***

*** \`ØªÙ… Ø´Ø±Ø­ Ø§Ù„Ø¯ÙˆØ±Ø© Ù…Ù† Ù‚Ø¨Ù„  :\`   ${explMention}***

${gradeLine}*** \`Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨  :\`***   Ø§Ø¹Ø·Ø§Ø¡ Ø±ÙˆÙ„ ( ${course} ) 

*** \` ØªÙˆÙ‚ÙŠØ¹ ÙˆØ§Ø¹ØªÙ…Ø§Ø¯ :\` ${sig} ***`;

      document.getElementById('outputSpecial').value = text;
    }

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
    document.addEventListener('DOMContentLoaded', function(){
      const basicBtn = document.getElementById('showBasic');
      const specialBtn = document.getElementById('showSpecial');
      const basicCard = document.getElementById('basicCard');
      const specialCard = document.getElementById('specialCard');
      const resultsCard = document.getElementById('resultsCard');

      function showCard(which){
        basicCard.style.display = 'none';
        specialCard.style.display = 'none';
        resultsCard.style.display = 'none';
        basicBtn.classList.remove('active');
        specialBtn.classList.remove('active');

        if(which === 'basic'){
          basicCard.style.display = 'block';
          basicBtn.classList.add('active');
        } else if(which === 'special'){
          specialCard.style.display = 'block';
          specialBtn.classList.add('active');
        }
      }
      showCard('basic');

      basicBtn.addEventListener('click', ()=> showCard('basic'));
      specialBtn.addEventListener('click', ()=> showCard('special'));

      document.getElementById('createBasic').addEventListener('click', generateBasic);
      document.getElementById('copyBasic').addEventListener('click', ()=> copyText('outputBasic'));
      document.getElementById('createSpecial').addEventListener('click', generateSpecial);
      document.getElementById('copySpecial').addEventListener('click', ()=> copyText('outputSpecial'));

      // ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ù† Ø²Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
      document.getElementById('openResultsFromBasic').addEventListener('click', function(){
        const course = document.getElementById('courseNameBasic').value || '';
        const num = document.getElementById('courseNumberBasic').value || '';
        openResultsToggle(course, num);
      });

      // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†ØªØ§Ø¦Ø¬
      document.getElementById('createResults').addEventListener('click', ()=> generateResults());
      document.getElementById('copyResults').addEventListener('click', ()=> copyText('outputResults'));

      // Ø³Ù„ÙˆÙƒ Ø§Ù„Ø¯Ø¨ÙˆØ³: ÙØªØ­/Ø§ØºÙ„Ø§Ù‚ + ØªØ£Ø«ÙŠØ± Ø§Ù„Ø³Ø­Ø¨ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ
      const pinToggle = document.getElementById('pinToggle');
      const pinMenu = document.getElementById('pinMenu');
      const pin = document.querySelector('.pin');

      function openPin(){ pinMenu.classList.add('open'); pinToggle.setAttribute('aria-expanded','true'); pinMenu.setAttribute('aria-hidden','false'); }
      function closePin(){ pinMenu.classList.remove('open'); pinToggle.setAttribute('aria-expanded','false'); pinMenu.setAttribute('aria-hidden','true'); pin.classList.remove('pulling'); pinMenu.classList.remove('pulled'); }

      pinToggle.addEventListener('click', function(e){ e.stopPropagation(); if(pinMenu.classList.contains('open')) closePin(); else openPin(); });

      // Ø§Ù„ØªÙØ§Ø¹Ù„ Ø§Ù„Ø³Ø­Ø¨ÙŠ: Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø§Ù„Ù…Ø·ÙˆÙ„ (mousedown / touchstart) ÙŠØ¸Ù‡Ø± ØªØ£Ø«ÙŠØ± Ø§Ù„Ø³Ø­Ø¨ØŒ ÙˆØ¹Ù†Ø¯ Ø§Ù„Ø¥ÙÙ„Ø§Øª ÙŠØ¹ÙˆØ¯
      let pullTimeout = null;
      function startPullInteraction(e){
        e.preventDefault();
        pin.classList.add('pulling');
        // Ø¨Ø¹Ø¯ 80ms Ù†Ø¶ÙŠÙ ØªØ£Ø«ÙŠØ± "Ù…Ø³Ø­ÙˆØ¨" Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„ØªØ¨Ø¯Ùˆ ÙˆÙƒØ£Ù†Ù‡Ø§ Ø³Ø­Ø¨Øª Ù„Ù„Ø®Ø§Ø±Ø¬
        pullTimeout = setTimeout(()=> {
          pinMenu.classList.add('pulled');
          // Ù†Ø¶Ù…Ù† Ø£Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù…Ø±Ø¦ÙŠØ© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø³Ø­Ø¨
          pinMenu.classList.add('open');
          pinToggle.setAttribute('aria-expanded','true');
          pinMenu.setAttribute('aria-hidden','false');
        }, 80);
      }
      function endPullInteraction(){
        clearTimeout(pullTimeout);
        pin.classList.remove('pulling');
        // Ù†Ø±Ø¬Ø¹ Ø§Ù„ØªØ£Ø«ÙŠØ± ØªØ¯Ø±ÙŠØ¬ÙŠØ§Ù‹
        pinMenu.classList.remove('pulled');
        // Ù†ØªØ±Ùƒ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù…ÙØªÙˆØ­Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø³Ø­Ø¨ØŒ Ø£Ùˆ Ù†ØºÙ„Ù‚Ù‡Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙØªÙˆØ­Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹ØŸ Ù†ØªØ±ÙƒÙ‡Ø§ Ù…ÙØªÙˆØ­Ø© Ù„ØªØ³Ù‡ÙŠÙ„ Ø§Ù„ÙˆØµÙˆÙ„
      }

      // Ø¯Ø¹Ù… Ø§Ù„ÙØ£Ø±Ø©
      pinToggle.addEventListener('mousedown', startPullInteraction);
      document.addEventListener('mouseup', endPullInteraction);
      // Ø¯Ø¹Ù… Ø§Ù„Ù„Ù…Ø³
      pinToggle.addEventListener('touchstart', startPullInteraction, {passive:false});
      document.addEventListener('touchend', endPullInteraction);

      // ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ø¯Ø¨ÙˆØ³
      const pinTabs = document.querySelectorAll('.pin-tab');
      const pinSections = document.querySelectorAll('.pin-section');
      pinTabs.forEach(tab=>{
        tab.addEventListener('click', ()=>{
          pinTabs.forEach(t=>{ t.classList.remove('active'); t.setAttribute('aria-selected','false'); });
          tab.classList.add('active'); tab.setAttribute('aria-selected','true');
          const target = tab.getAttribute('data-section');
          pinSections.forEach(sec=>{
            if(sec.getAttribute('data-section') === target) sec.style.display = '';
            else sec.style.display = 'none';
          });
        });
      });

      // Ø£Ø²Ø±Ø§Ø± Ù†Ø³Ø® Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¯Ø¨ÙˆØ³
      const copyButtons = document.querySelectorAll('.copy-link-btn');
      copyButtons.forEach(btn=>{
        btn.addEventListener('click', (e)=>{
          e.stopPropagation();
          const url = btn.getAttribute('data-url') || '';
          if(!url){ alert('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ø§Ø¨Ø· Ù„Ù„Ù†Ø³Ø®'); return; }
          navigator.clipboard.writeText(url).then(()=>{
            const original = btn.innerHTML;
            btn.innerHTML = 'ØªÙ… Ø§Ù„Ù†Ø³Ø® <span class="copy-icon">âœ…</span>';
            setTimeout(()=> btn.innerHTML = original, 1200);
          }).catch(()=> alert('ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø®'));
        });
      });

      document.addEventListener('click', function(e){
        const inside = pinMenu.contains(e.target) || pinToggle.contains(e.target);
        if(!inside) closePin();
      });
      document.addEventListener('keydown', function(e){ if(e.key === 'Escape') closePin(); });
    });
  </script>
</body>
</html>


